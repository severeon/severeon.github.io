"use strict";(globalThis.webpackChunkneuroscript_docs=globalThis.webpackChunkneuroscript_docs||[]).push([[4382],{4995(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"compiler","title":"Compiler Reference","description":"Complete reference for parse, validate, compile, and list commands","source":"@site/docs/compiler.md","sourceDirName":".","slug":"/compiler","permalink":"/docs/compiler","draft":false,"unlisted":false,"editUrl":"https://github.com/neuroscript/neuroscript/tree/main/website/docs/compiler.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Compiler Reference","description":"Complete reference for parse, validate, compile, and list commands"},"sidebar":"docsSidebar","previous":{"title":"Introduction to NeuroScript","permalink":"/docs/intro"},"next":{"title":"Shape Inference","permalink":"/docs/tutorials/shape-inference"}}');var r=i(4848),l=i(8453);const d={sidebar_position:2,title:"Compiler Reference",description:"Complete reference for parse, validate, compile, and list commands"},t="Compiler Reference",c={},o=[{value:"<code>neuroscript parse</code>",id:"neuroscript-parse",level:2},{value:"Arguments [parse]",id:"arguments-parse",level:3},{value:"Options [parse]",id:"options-parse",level:3},{value:"Example [parse]",id:"example-parse",level:3},{value:"<code>neuroscript validate</code>",id:"neuroscript-validate",level:2},{value:"Arguments [validate]",id:"arguments-validate",level:3},{value:"Options [validate]",id:"options-validate",level:3},{value:"Example [validate]",id:"example-validate",level:3},{value:"<code>neuroscript compile</code>",id:"neuroscript-compile",level:2},{value:"Arguments [compile]",id:"arguments-compile",level:3},{value:"Options [compile]",id:"options-compile",level:3},{value:"Examples [compile]",id:"examples-compile",level:3},{value:"<code>neuroscript list</code>",id:"neuroscript-list",level:2},{value:"Arguments [list]",id:"arguments-list",level:3},{value:"Options [list]",id:"options-list",level:3},{value:"Examples [list]",id:"examples-list",level:3},{value:"Bundle Mode",id:"bundle-mode",level:2},{value:"When to use <code>--bundle</code>",id:"when-to-use---bundle",level:3},{value:"Example",id:"example",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"compiler-reference",children:"Compiler Reference"})}),"\n",(0,r.jsxs)(n.p,{children:["The NeuroScript CLI provides four commands for working with ",(0,r.jsx)(n.code,{children:".ns"})," source files: ",(0,r.jsx)(n.strong,{children:"parse"}),", ",(0,r.jsx)(n.strong,{children:"validate"}),", ",(0,r.jsx)(n.strong,{children:"compile"}),", and ",(0,r.jsx)(n.strong,{children:"list"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"neuroscript-parse",children:(0,r.jsx)(n.code,{children:"neuroscript parse"})}),"\n",(0,r.jsx)(n.p,{children:"Parse a NeuroScript file and display its internal IR structure. Useful for understanding how the compiler sees your code."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"neuroscript parse <FILE> [OPTIONS]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"arguments-parse",children:"Arguments [parse]"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Argument"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<FILE>"})}),(0,r.jsxs)(n.td,{children:["Path to a ",(0,r.jsx)(n.code,{children:".ns"})," source file"]})]})})]}),"\n",(0,r.jsx)(n.h3,{id:"options-parse",children:"Options [parse]"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Option"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-v, --verbose"})}),(0,r.jsx)(n.td,{children:"Show detailed IR structure output"})]})})]}),"\n",(0,r.jsx)(n.h3,{id:"example-parse",children:"Example [parse]"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Quick check that a file parses\nneuroscript parse my_model.ns\n\n# See the full IR\nneuroscript parse my_model.ns --verbose\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"neuroscript-validate",children:(0,r.jsx)(n.code,{children:"neuroscript validate"})}),"\n",(0,r.jsx)(n.p,{children:"Parse a file and run all validation checks: neuron existence, connection arity, cycle detection, and shape compatibility."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"neuroscript validate <FILE> [OPTIONS]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"arguments-validate",children:"Arguments [validate]"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Argument"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<FILE>"})}),(0,r.jsxs)(n.td,{children:["Path to a ",(0,r.jsx)(n.code,{children:".ns"})," source file"]})]})})]}),"\n",(0,r.jsx)(n.h3,{id:"options-validate",children:"Options [validate]"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Option"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-v, --verbose"})}),(0,r.jsx)(n.td,{children:"Show detailed validation output"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--no-stdlib"})}),(0,r.jsx)(n.td,{children:"Skip loading the standard library"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--no-deps"})}),(0,r.jsx)(n.td,{children:"Skip loading fetched dependencies"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"example-validate",children:"Example [validate]"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"neuroscript validate my_model.ns --verbose\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"neuroscript-compile",children:(0,r.jsx)(n.code,{children:"neuroscript compile"})}),"\n",(0,r.jsxs)(n.p,{children:["Full compilation pipeline: parse, validate, optimize, and generate a PyTorch ",(0,r.jsx)(n.code,{children:"nn.Module"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"neuroscript compile <FILE> [OPTIONS]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"arguments-compile",children:"Arguments [compile]"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Argument"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<FILE>"})}),(0,r.jsxs)(n.td,{children:["Path to a ",(0,r.jsx)(n.code,{children:".ns"})," source file"]})]})})]}),"\n",(0,r.jsx)(n.h3,{id:"options-compile",children:"Options [compile]"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Option"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-n, --neuron <NAME>"})}),(0,r.jsx)(n.td,{children:"Neuron to compile (defaults to PascalCase of filename)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-o, --output <FILE>"})}),(0,r.jsx)(n.td,{children:"Write output to a file instead of stdout"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-v, --verbose"})}),(0,r.jsx)(n.td,{children:"Show optimization stats and detailed output"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--bundle"})}),(0,r.jsx)(n.td,{children:"Inline primitive class definitions for a self-contained output"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--no-optimize"})}),(0,r.jsx)(n.td,{children:"Disable all optimizations"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--no-dead-elim"})}),(0,r.jsx)(n.td,{children:"Disable dead branch elimination only"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--no-stdlib"})}),(0,r.jsx)(n.td,{children:"Skip loading the standard library"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--no-deps"})}),(0,r.jsx)(n.td,{children:"Skip loading fetched dependencies"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"examples-compile",children:"Examples [compile]"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Compile to stdout (auto-detects neuron from filename)\nneuroscript compile my_model.ns\n\n# Compile a specific neuron to a file\nneuroscript compile my_model.ns --neuron Encoder -o encoder.py\n\n# See optimization details\nneuroscript compile my_model.ns --verbose\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"neuroscript-list",children:(0,r.jsx)(n.code,{children:"neuroscript list"})}),"\n",(0,r.jsx)(n.p,{children:"List all neurons defined in a file, the standard library, or fetched packages."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"neuroscript list [FILE] [OPTIONS]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"arguments-list",children:"Arguments [list]"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Argument"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"[FILE]"})}),(0,r.jsxs)(n.td,{children:["NeuroScript file (optional when using ",(0,r.jsx)(n.code,{children:"--stdlib"})," or ",(0,r.jsx)(n.code,{children:"--available"}),")"]})]})})]}),"\n",(0,r.jsx)(n.h3,{id:"options-list",children:"Options [list]"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Option"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-v, --verbose"})}),(0,r.jsx)(n.td,{children:"Show connection details"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--stdlib"})}),(0,r.jsx)(n.td,{children:"List all primitives and stdlib composites"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--package <NAME>"})}),(0,r.jsx)(n.td,{children:"List neurons from a specific fetched dependency"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--available"})}),(0,r.jsx)(n.td,{children:"List everything: stdlib + all dependencies"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"examples-list",children:"Examples [list]"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"neuroscript list my_model.ns\nneuroscript list --stdlib --verbose\nneuroscript list --available\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"bundle-mode",children:"Bundle Mode"}),"\n",(0,r.jsxs)(n.p,{children:["By default, compiled output imports primitives from the ",(0,r.jsx)(n.code,{children:"neuroscript_runtime"})," Python package:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from neuroscript_runtime.primitives.linear import Linear\nfrom neuroscript_runtime.primitives.activations import GELU\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This requires ",(0,r.jsx)(n.code,{children:"pip install neuroscript-runtime"})," in the target environment."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"--bundle"})})," flag eliminates that dependency by inlining the required primitive class definitions directly into the generated file. The output is a single, self-contained Python module that only needs ",(0,r.jsx)(n.code,{children:"torch"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"neuroscript compile my_model.ns --bundle -o model.py\n"})}),"\n",(0,r.jsx)(n.p,{children:"The bundled file includes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["A unified import block (",(0,r.jsx)(n.code,{children:"torch"}),", ",(0,r.jsx)(n.code,{children:"torch.nn"}),", ",(0,r.jsx)(n.code,{children:"torch.nn.functional"}),", ",(0,r.jsx)(n.code,{children:"math"}),", ",(0,r.jsx)(n.code,{children:"typing"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Only the primitive classes actually used by your neuron (not the entire library)"}),"\n",(0,r.jsx)(n.li,{children:"Your compiled neuron class(es) at the bottom"}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"when-to-use---bundle",children:["When to use ",(0,r.jsx)(n.code,{children:"--bundle"})]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Scenario"}),(0,r.jsx)(n.th,{children:"Recommended"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Development with the NeuroScript toolchain installed"}),(0,r.jsx)(n.td,{children:"Default (no flag)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Sharing a generated file with collaborators"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--bundle"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["Deploying to an environment without ",(0,r.jsx)(n.code,{children:"neuroscript_runtime"})]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--bundle"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Embedding generated code in another project"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--bundle"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Minimizing output size"}),(0,r.jsx)(n.td,{children:"Default (imports are smaller)"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Generate a self-contained model file\nneuroscript compile transformer.ns --bundle -o transformer.py\n\n# Verify it works without neuroscript_runtime installed\npython -c \"\nimport importlib.util, torch\nspec = importlib.util.spec_from_file_location('model', 'transformer.py')\nmod = importlib.util.module_from_spec(spec)\nspec.loader.exec_module(mod)\nprint('Classes:', [c for c in dir(mod) if not c.startswith('_')])\n\"\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453(e,n,i){i.d(n,{R:()=>d,x:()=>t});var s=i(6540);const r={},l=s.createContext(r);function d(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);