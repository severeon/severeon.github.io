"use strict";(globalThis.webpackChunkneuroscript_docs=globalThis.webpackChunkneuroscript_docs||[]).push([[9672],{7348(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"packages/creating-packages","title":"Creating Packages","description":"Initialize and structure NeuroScript neuron packages","source":"@site/docs/packages/creating-packages.md","sourceDirName":"packages","slug":"/packages/creating-packages","permalink":"/docs/packages/creating-packages","draft":false,"unlisted":false,"editUrl":"https://github.com/neuroscript/neuroscript/tree/main/website/docs/packages/creating-packages.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Creating Packages","description":"Initialize and structure NeuroScript neuron packages"},"sidebar":"docsSidebar","previous":{"title":"Package Management","permalink":"/docs/packages/"},"next":{"title":"Working with Dependencies","permalink":"/docs/packages/dependencies"}}');var s=i(4848),r=i(8453);const o={sidebar_position:2,title:"Creating Packages",description:"Initialize and structure NeuroScript neuron packages"},t="Creating Packages",c={},l=[{value:"Initializing a Package",id:"initializing-a-package",level:2},{value:"The Axon.toml Manifest",id:"the-axontoml-manifest",level:2},{value:"Package Metadata",id:"package-metadata",level:3},{value:"Exported Neurons",id:"exported-neurons",level:3},{value:"Dependencies",id:"dependencies",level:3},{value:"Python Runtime",id:"python-runtime",level:3},{value:"Writing Neuron Definitions",id:"writing-neuron-definitions",level:2},{value:"Example: SwiGLU Feed-Forward Network",id:"example-swiglu-feed-forward-network",level:3},{value:"Example: Mamba-Style Block",id:"example-mamba-style-block",level:3},{value:"Validating Your Package",id:"validating-your-package",level:3},{value:"Complete Example: Building a Package",id:"complete-example-building-a-package",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"creating-packages",children:"Creating Packages"})}),"\n",(0,s.jsxs)(n.p,{children:["A NeuroScript package is a collection of neuron definitions bundled with an ",(0,s.jsx)(n.code,{children:"Axon.toml"})," manifest. Packages can be shared as git repositories and consumed as dependencies by other projects."]}),"\n",(0,s.jsx)(n.h2,{id:"initializing-a-package",children:"Initializing a Package"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"neuroscript init"})," to scaffold a new package:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'neuroscript init attention-mechanisms \\\n  --author "Your Name <you@example.com>" \\\n  --license MIT\n'})}),"\n",(0,s.jsx)(n.p,{children:"This creates:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"attention-mechanisms/\n\u251c\u2500\u2500 Axon.toml          # Package manifest\n\u251c\u2500\u2500 README.md          # Basic documentation\n\u251c\u2500\u2500 .gitignore         # Common ignore patterns\n\u2514\u2500\u2500 src/\n    \u2514\u2500\u2500 attention_mechanisms.ns  # Starter neuron definition\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"--bin"})," to include an ",(0,s.jsx)(n.code,{children:"examples/"})," directory:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"neuroscript init attention-mechanisms --bin\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"--path"})," to create the package in a specific location:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"neuroscript init my-neurons --path ./packages/my-neurons\n"})}),"\n",(0,s.jsx)(n.h2,{id:"the-axontoml-manifest",children:"The Axon.toml Manifest"}),"\n",(0,s.jsx)(n.p,{children:"The manifest is the central configuration file for your package."}),"\n",(0,s.jsx)(n.h3,{id:"package-metadata",children:"Package Metadata"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[package]\nname = "attention-mechanisms"\nversion = "0.1.0"\nauthors = ["Your Name <you@example.com>"]\nlicense = "MIT"\ndescription = "Self-attention neurons for transformer architectures"\nrepository = "https://github.com/user/attention-mechanisms"\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Name rules"}),": lowercase, alphanumeric + hyphens only. No leading, trailing, or consecutive hyphens."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'# Valid names\nname = "core-primitives"\nname = "attention123"\nname = "my-cool-neurons"\n\n# Invalid names\nname = "Invalid_Name"        # no underscores\nname = "-leading-hyphen"     # no leading hyphen\nname = "double--hyphen"      # no consecutive hyphens\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Version"}),": must be valid ",(0,s.jsx)(n.a,{href:"https://semver.org/",children:"semver"})," (e.g., ",(0,s.jsx)(n.code,{children:'"0.1.0"'}),", ",(0,s.jsx)(n.code,{children:'"1.2.3-alpha"'}),")."]}),"\n",(0,s.jsx)(n.h3,{id:"exported-neurons",children:"Exported Neurons"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"neurons"})," list declares which neurons your package provides to consumers:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'neurons = [\n    "MultiHeadAttention",\n    "ScaledDotProductAttention",\n    "CrossAttention"\n]\n'})}),"\n",(0,s.jsxs)(n.p,{children:["If ",(0,s.jsx)(n.code,{children:"neurons"})," is empty or omitted, ",(0,s.jsx)(n.strong,{children:"all"})," neuron definitions in ",(0,s.jsx)(n.code,{children:"src/*.ns"})," are exported."]}),"\n",(0,s.jsx)(n.h3,{id:"dependencies",children:"Dependencies"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[dependencies]\ncore-blocks = { git = "https://github.com/org/core-blocks.git", branch = "main" }\nlocal-utils = { path = "../local-utils" }\n'})}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"dependencies",children:"Working with Dependencies"})," for details."]}),"\n",(0,s.jsx)(n.h3,{id:"python-runtime",children:"Python Runtime"}),"\n",(0,s.jsx)(n.p,{children:"Declare Python dependencies that your compiled neurons need at runtime:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[python-runtime]\nrequires = ["torch>=2.0", "einops>=0.6"]\n'})}),"\n",(0,s.jsx)(n.h2,{id:"writing-neuron-definitions",children:"Writing Neuron Definitions"}),"\n",(0,s.jsxs)(n.p,{children:["Place your ",(0,s.jsx)(n.code,{children:".ns"})," files in the ",(0,s.jsx)(n.code,{children:"src/"})," directory. Each file can contain one or more neuron definitions."]}),"\n",(0,s.jsx)(n.h3,{id:"example-swiglu-feed-forward-network",children:"Example: SwiGLU Feed-Forward Network"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"src/swiglu_ffn.ns"})}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-neuroscript",children:"neuron SwiGLU_FFN(dim, expansion):\n    in: [*batch, seq, dim]\n    out: [*batch, seq, dim]\n    graph:\n        in -> Fork() -> (gate_path, value_path)\n        gate_path ->\n            Linear(dim, dim * expansion)\n            SiLU()\n            gate\n        value_path ->\n            Linear(dim, dim * expansion)\n            value\n        (gate, value) -> Multiply() ->\n            Linear(dim * expansion, dim) ->\n            out\n"})}),"\n",(0,s.jsx)(n.h3,{id:"example-mamba-style-block",children:"Example: Mamba-Style Block"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"src/mamba_block.ns"})}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-neuroscript",children:"neuron MambaBlock(d_model, d_inner):\n    in: [*batch, seq, d_model]\n    out: [*batch, seq, d_model]\n    graph:\n        in -> Fork() -> (main, skip)\n        main ->\n            Linear(d_model, d_inner)\n            SiLU()\n            Linear(d_inner, d_inner)\n            SiLU()\n            Linear(d_inner, d_model)\n            processed\n        (processed, skip) -> Add() -> out\n"})}),"\n",(0,s.jsx)(n.h3,{id:"validating-your-package",children:"Validating Your Package"}),"\n",(0,s.jsx)(n.p,{children:"Always validate your neurons before publishing:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Validate a single file\nneuroscript validate src/swiglu_ffn.ns\n\n# Compile to PyTorch to verify codegen\nneuroscript compile src/swiglu_ffn.ns\n\n# List all neurons in a file\nneuroscript list src/swiglu_ffn.ns\n"})}),"\n",(0,s.jsx)(n.h2,{id:"complete-example-building-a-package",children:"Complete Example: Building a Package"}),"\n",(0,s.jsx)(n.p,{children:"Here is a full walkthrough of creating a package with two neurons:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# 1. Initialize the package\nneuroscript init transformer-blocks \\\n  --author "Your Name <you@example.com>" \\\n  --license MIT\n\ncd transformer-blocks\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsxs)(n.strong,{children:["2. Edit ",(0,s.jsx)(n.code,{children:"Axon.toml"})]})," to declare your exports:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[package]\nname = "transformer-blocks"\nversion = "0.1.0"\nauthors = ["Your Name <you@example.com>"]\nlicense = "MIT"\ndescription = "Reusable transformer building blocks"\n\nneurons = ["PreNormBlock", "SwiGLU_FFN"]\n\n[dependencies]\n\n[python-runtime]\nrequires = ["torch>=2.0"]\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsxs)(n.strong,{children:["3. Create ",(0,s.jsx)(n.code,{children:"src/blocks.ns"})]})," with your neuron definitions:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-neuroscript",children:"neuron SwiGLU_FFN(dim, expansion):\n    in: [*batch, seq, dim]\n    out: [*batch, seq, dim]\n    graph:\n        in -> Fork() -> (gate_path, value_path)\n        gate_path ->\n            Linear(dim, dim * expansion)\n            SiLU()\n            gate\n        value_path ->\n            Linear(dim, dim * expansion)\n            value\n        (gate, value) -> Multiply() ->\n            Linear(dim * expansion, dim) ->\n            out\n\nneuron PreNormBlock(dim, heads, expansion):\n    in: [*batch, seq, dim]\n    out: [*batch, seq, dim]\n    graph:\n        in -> Fork() -> (main, skip)\n        main ->\n            LayerNorm(dim)\n            MultiHeadSelfAttention(dim, heads)\n            processed\n        (processed, skip) -> Add() -> out\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"4. Validate and test:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"neuroscript validate src/blocks.ns\nneuroscript compile src/blocks.ns --neuron SwiGLU_FFN\nneuroscript compile src/blocks.ns --neuron PreNormBlock\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"5. Push to git"})," to make it available as a dependency:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'git init && git add -A && git commit -m "Initial package"\ngit remote add origin https://github.com/you/transformer-blocks.git\ngit push -u origin main\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Other projects can now depend on this package using the git URL. See ",(0,s.jsx)(n.a,{href:"dependencies",children:"Working with Dependencies"})," for how consumers import your neurons."]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>o,x:()=>t});var a=i(6540);const s={},r=a.createContext(s);function o(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);