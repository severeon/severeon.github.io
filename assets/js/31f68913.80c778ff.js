"use strict";(globalThis.webpackChunkneuroscript_docs=globalThis.webpackChunkneuroscript_docs||[]).push([[4390],{7180(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>o,frontMatter:()=>t,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"packages/publishing","title":"Publishing and Security","description":"Sign packages and verify integrity with Ed25519 and SHA-256","source":"@site/docs/packages/publishing.md","sourceDirName":"packages","slug":"/packages/publishing","permalink":"/docs/packages/publishing","draft":false,"unlisted":false,"editUrl":"https://github.com/neuroscript/neuroscript/tree/main/website/docs/packages/publishing.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Publishing and Security","description":"Sign packages and verify integrity with Ed25519 and SHA-256"},"sidebar":"docsSidebar","previous":{"title":"Working with Dependencies","permalink":"/docs/packages/dependencies"},"next":{"title":"CLI Reference","permalink":"/docs/packages/cli-reference"}}');var r=i(4848),c=i(8453);const t={sidebar_position:4,title:"Publishing and Security",description:"Sign packages and verify integrity with Ed25519 and SHA-256"},a="Publishing and Security",d={},l=[{value:"Security Overview",id:"security-overview",level:2},{value:"Generating Keys",id:"generating-keys",level:2},{value:"Publishing a Package",id:"publishing-a-package",level:2},{value:"Options",id:"options",level:3},{value:"What Publish Does",id:"what-publish-does",level:3},{value:"Verifying a Package",id:"verifying-a-package",level:2},{value:"What Verify Checks",id:"what-verify-checks",level:3},{value:"Verification on Fetch",id:"verification-on-fetch",level:3},{value:"Security Formats",id:"security-formats",level:2},{value:"Workflow: Publish and Consume",id:"workflow-publish-and-consume",level:2},{value:"Publisher Side",id:"publisher-side",level:3},{value:"Consumer Side",id:"consumer-side",level:3},{value:"Best Practices",id:"best-practices",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"publishing-and-security",children:"Publishing and Security"})}),"\n",(0,r.jsx)(n.p,{children:"NeuroScript packages include cryptographic security features to ensure integrity and authenticity. Packages are signed with Ed25519 keys and verified with SHA-256 checksums."}),"\n",(0,r.jsx)(n.h2,{id:"security-overview",children:"Security Overview"}),"\n",(0,r.jsx)(n.p,{children:"Every published package gets:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SHA-256 checksums"})," for each ",(0,r.jsx)(n.code,{children:".ns"})," source file and an overall package checksum"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ed25519 signature"})," over the package checksum, proving publisher identity"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Automatic verification"})," when consumers fetch the package"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"generating-keys",children:"Generating Keys"}),"\n",(0,r.jsx)(n.p,{children:"Before publishing, generate an Ed25519 keypair:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"neuroscript keygen my-package\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u2713 Generated Ed25519 keypair 'my-package'\n  Private key: ~/.neuroscript/keys/my-package.key\n  Public key:  ~/.neuroscript/keys/my-package.pub\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Keys are stored in ",(0,r.jsx)(n.code,{children:"~/.neuroscript/keys/"}),". Private keys are created with restricted permissions (0600 on Unix)."]}),"\n",(0,r.jsx)(n.h2,{id:"publishing-a-package",children:"Publishing a Package"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"publish"})," command computes checksums, signs the package, and updates ",(0,r.jsx)(n.code,{children:"Axon.toml"})," with security metadata:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"neuroscript publish\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Publishing my-package v0.1.0\n  Computed checksums for 3 files\n  Overall checksum: sha256:93cd5af901067ee...\n  Signing with key: ~/.neuroscript/keys/my-package.key\n\u2713 Package prepared for distribution\n"})}),"\n",(0,r.jsx)(n.h3,{id:"options",children:"Options"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Checksums only (no signature)\nneuroscript publish --no-sign\n\n# Use a specific key file\nneuroscript publish --key /path/to/my.key\n\n# See detailed output\nneuroscript publish --verbose\n"})}),"\n",(0,r.jsx)(n.h3,{id:"what-publish-does",children:"What Publish Does"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Scans all ",(0,r.jsx)(n.code,{children:".ns"})," files in ",(0,r.jsx)(n.code,{children:"src/"})]}),"\n",(0,r.jsx)(n.li,{children:"Computes SHA-256 checksum for each file"}),"\n",(0,r.jsx)(n.li,{children:"Computes an overall package checksum"}),"\n",(0,r.jsx)(n.li,{children:"Signs the overall checksum with your Ed25519 private key"}),"\n",(0,r.jsxs)(n.li,{children:["Writes the security metadata into ",(0,r.jsx)(n.code,{children:"Axon.toml"}),":"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[security]\npublisher-key = "ED25519:29da85daa608..."\nsignature = "ED25519:a1b2c3d4e5f6..."\nchecksum = "sha256:93cd5af901067..."\n\n[security.checksums]\n"src/attention.ns" = "sha256:4128bddc..."\n"src/projection.ns" = "sha256:7f3a2b1c..."\n'})}),"\n",(0,r.jsxs)(n.p,{children:["After publishing, commit and push your updated ",(0,r.jsx)(n.code,{children:"Axon.toml"})," to make the signed package available."]}),"\n",(0,r.jsx)(n.h2,{id:"verifying-a-package",children:"Verifying a Package"}),"\n",(0,r.jsx)(n.p,{children:"Verify the integrity and authenticity of a package:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"neuroscript verify\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u2713 File checksums: all 3 files verified\n\u2713 Overall checksum: valid\n\u2713 Signature: valid\n\n\u2713 Package verification passed\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"--verbose"})," for per-file details:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"neuroscript verify --verbose\n"})}),"\n",(0,r.jsx)(n.h3,{id:"what-verify-checks",children:"What Verify Checks"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Each ",(0,r.jsx)(n.code,{children:".ns"})," file matches its recorded SHA-256 checksum"]}),"\n",(0,r.jsx)(n.li,{children:"The overall checksum matches the combined file checksums"}),"\n",(0,r.jsx)(n.li,{children:"The Ed25519 signature is valid for the publisher key"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"verification-on-fetch",children:"Verification on Fetch"}),"\n",(0,r.jsxs)(n.p,{children:["When you ",(0,r.jsx)(n.code,{children:"neuroscript fetch"})," a git dependency that includes security metadata in its ",(0,r.jsx)(n.code,{children:"Axon.toml"}),", checksums are ",(0,r.jsx)(n.strong,{children:"automatically verified"}),". Checksum mismatches produce a hard error (fetch fails). Signature mismatches produce a warning but allow the fetch to proceed."]}),"\n",(0,r.jsx)(n.h2,{id:"security-formats",children:"Security Formats"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Format"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Publisher key"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ED25519:<64-hex>"})}),(0,r.jsx)(n.td,{children:"32-byte Ed25519 public key"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Signature"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ED25519:<128-hex>"})}),(0,r.jsx)(n.td,{children:"64-byte Ed25519 signature"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Checksum"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sha256:<64-hex>"})}),(0,r.jsx)(n.td,{children:"32-byte SHA-256 hash"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Key files"}),(0,r.jsx)(n.td,{children:"Raw hex"}),(0,r.jsxs)(n.td,{children:["32-byte seed (",(0,r.jsx)(n.code,{children:".key"}),") or public key (",(0,r.jsx)(n.code,{children:".pub"}),")"]})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"workflow-publish-and-consume",children:"Workflow: Publish and Consume"}),"\n",(0,r.jsx)(n.h3,{id:"publisher-side",children:"Publisher Side"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Create and develop the package\nneuroscript init my-neurons\ncd my-neurons\n# ... write neurons in src/ ...\n\n# Generate keys and publish\nneuroscript keygen my-neurons\nneuroscript publish\n\n# Push to git\ngit add -A && git commit -m "v0.1.0"\ngit push origin main\n'})}),"\n",(0,r.jsx)(n.h3,{id:"consumer-side",children:"Consumer Side"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Add and fetch the dependency\nneuroscript add my-neurons \\\n  --git "https://github.com/user/my-neurons.git"\nneuroscript fetch\n\n# Checksums are verified automatically during fetch\n# Use the neurons in your project\nneuroscript compile src/model.ns\n'})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Commit your lockfile"})," (",(0,r.jsx)(n.code,{children:"Axon.lock"}),") to version control for reproducible builds"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Generate keys per package"})," rather than using a single global key"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Never share private keys"})," (",(0,r.jsx)(n.code,{children:".key"})," files) - only the public key is embedded in ",(0,r.jsx)(n.code,{children:"Axon.toml"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Verify after cloning"})," - run ",(0,r.jsx)(n.code,{children:"neuroscript verify"})," when working with packages from untrusted sources"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use tags for releases"})," - pin dependencies to git tags rather than branches for stability"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453(e,n,i){i.d(n,{R:()=>t,x:()=>a});var s=i(6540);const r={},c=s.createContext(r);function t(e){const n=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);